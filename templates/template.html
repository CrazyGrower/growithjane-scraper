<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ title }}</title>
  <style>
    body { 
      font-family: 'Arial', sans-serif; 
      margin: 2rem;
      background-color: #f8f9f3;
      color: #333;
    }
    h1 { 
      color: #4CAF50; 
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      border-bottom: 2px solid #4CAF50;
      padding-bottom: 0.5rem;
    }
    h2 { 
      color: #2E7D32; 
      border-left: 4px solid #4CAF50;
      padding-left: 10px;
      margin-top: 2rem;
    }
    .section { 
      margin-bottom: 2rem; 
      background-color: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid rgba(76, 175, 80, 0.2);
    }
    .metadata-block { 
      background-color: #f0f7f0; 
      border-radius: 10px; 
      border: 1px solid #b7e1b7;
    }
    .stages-table, .env-table { 
      width: 100%; 
      border-collapse: collapse; 
      margin-top: 1rem;
      background-color: white;
    }
    .stages-table th, .env-table th { 
      background-color: #4CAF50; 
      color: white;
      padding: 0.8rem;
      text-align: left;
    }
    .stages-table td, .env-table td { 
      border-bottom: 1px solid #ddd; 
      padding: 0.8rem;
    }
    .stages-table tr:nth-child(even), .env-table tr:nth-child(even) { 
      background-color: #f2f2f2;
    }
    .entry { 
      margin-top: 1.5rem; 
      padding: 1.5rem; 
      border-radius: 10px;
      background-color: white; 
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-left: 5px solid #4CAF50;
    }
    .entry-title {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 0.5rem;
      margin-bottom: 0.8rem;
    }
    .plant-state {
      display: inline-block;
      padding: 5px 10px;
      background-color: #e8f5e9;
      border-radius: 15px;
      color: #2E7D32;
      font-weight: bold;
    }
    .image-gallery { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 12px; 
      margin-top: 15px; 
    }
    .image-gallery img { 
      max-width: 200px; 
      max-height: 200px; 
      object-fit: cover; 
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border: 1px solid #ddd;
    }
    .action-list {
      list-style-type: none;
      padding-left: 0;
    }
    .action-list li {
      margin-bottom: 8px;
      padding: 8px 12px;
      background-color: #f5f5f5;
      border-radius: 6px;
      position: relative;
      padding-left: 30px;
    }
    .action-list li:before {
      content: "‚Ä¢";
      color: #4CAF50;
      font-size: 20px;
      position: absolute;
      left: 12px;
      top: 6px;
    }
    .cannabis-decoration {
      text-align: center;
      margin: 1rem 0;
      color: #4CAF50;
      font-size: 24px;
    }
    @media print {
      .section {
        break-inside: avoid;
      }
      .entry {
        break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <h1>{{ title }}</h1>

  <div class="section metadata-block">
    <h2>Grow Info</h2>
    <div class="cannabis-decoration">‚òòÔ∏è üå± ‚òòÔ∏è</div>

    <h3>Stages</h3>
    <table class="stages-table">
      <tr><th>Stage</th><th>Date</th></tr>
      {% for stage in metadata.stages %}
      <tr><td>{{ stage.name }}</td><td>{{ stage.date }}</td></tr>
      {% endfor %}
    </table>

    <h3>Environment</h3>
    <table class="env-table">
      <tr><th>Parameter</th><th>Value</th></tr>
      {% if metadata.strain %}
      <tr><td><strong>Strain</strong></td><td>{{ metadata.strain.brand }} {{ metadata.strain.name }}</td></tr>
      {% endif %}
      
      <tr><td><strong>Name</strong></td><td>Hydro mars</td></tr>
      <tr><td><strong>Type</strong></td><td>Indoor</td></tr>
      <tr><td><strong>Exposure Time</strong></td><td>16 Hours</td></tr>
      <tr><td><strong>Environment Size</strong></td><td>80 cm x 160 cm x 80 cm</td></tr>
      <tr><td><strong>Lights</strong></td><td>LED - 150 W</td></tr>
      
      {% for label, value in metadata.environment.items() %}
      {% if label not in ['Name', 'Type', 'Exposure Time', 'Environment Size', 'Lights'] %}
      <tr><td><strong>{{ label }}</strong></td><td>{{ value }}</td></tr>
      {% endif %}
      {% endfor %}
    </table>
  </div>

  <div class="section">
    <h2>Grow Log Entries</h2>
    <div class="cannabis-decoration">üåø üåø üåø</div>
    
    {% for entry in entries %}
    <div class="entry">
      <div class="entry-title">
        <p><strong>Date:</strong> {{ entry.full_date }} ({{ entry.day_count }})</p>
        <p><span class="plant-state">{{ entry.plant_state }}</span></p>
      </div>
      
      {% if entry.actions and entry.actions|length > 0 %}
      <ul class="action-list">
        {% for action in entry.actions %}
        <li>{{ action }}</li>
        {% endfor %}
      </ul>
      {% endif %}
      
      {% if entry.images and entry.images|length > 0 %}
      <div class="image-gallery">
        {% for img in entry.images %}
        <img src="{{ img }}" alt="Plant photo from {{ entry.full_date }}">
        {% endfor %}
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</body>
</html>